

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>PyCRAM Presentation &#8212; PyCRAM</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" href="../_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.4045f2051d55cab465a707391d5b2007.min.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="../_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/clipboard.min.js"></script>
    <script src="../_static/copybutton.js"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"
const thebe_selector = ".thebe,.cell"
const thebe_selector_input = "pre"
const thebe_selector_output = ".output, .cell_output"
</script>
    <script async="async" src="../_static/sphinx-thebe.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'notebooks/intro';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/pycram_logo.png" class="logo__image only-light" alt="PyCRAM - Home"/>
    <script>document.write(`<img src="../_static/pycram_logo.png" class="logo__image only-dark" alt="PyCRAM - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../index.html">
                    Welcome to pycram’s documentation!
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Examples</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../designators.html">Designators</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/><label class="toctree-toggle" for="toctree-checkbox-1"><i class="fa-solid fa-chevron-down"></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="action_designator.html">Action Designator</a></li>
<li class="toctree-l2"><a class="reference internal" href="object_designator.html">Object Designator</a></li>
<li class="toctree-l2"><a class="reference internal" href="location_designator.html">Location Designator</a></li>
<li class="toctree-l2"><a class="reference internal" href="motion_designator.html">Motion Designator</a></li>
</ul>
</li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Concepts</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../ros_utils.html">ROS Utils</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Trouble Shooting</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../remarks.html">General Remarks</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/cram2/pycram" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/cram2/pycram/issues/new?title=Issue%20on%20page%20%2Fnotebooks/intro.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/notebooks/intro.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>PyCRAM Presentation</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">PyCRAM Presentation</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bullet-world">Bullet World</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objects">Objects</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#costmaps">Costmaps</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visibility-costmaps">Visibility Costmaps</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#occupancy-costmap">Occupancy Costmap</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bullet-world-reasoning">Bullet World Reasoning</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#designators">Designators</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#motion-designators">Motion Designators</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#object-designators">Object Designators</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#location-designator">Location Designator</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#location-designators">Location Designators</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#action-designator">Action Designator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#making-a-simple-plan">Making a simple plan</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#task-trees">Task Trees</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#orm">ORM</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="pycram-presentation">
<h1>PyCRAM Presentation<a class="headerlink" href="#pycram-presentation" title="Permalink to this heading">#</a></h1>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pycram</span>
</pre></div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="bullet-world">
<h1>Bullet World<a class="headerlink" href="#bullet-world" title="Permalink to this heading">#</a></h1>
<p>The BulletWorld is the internal simulation of PyCRAM. You can simulate different actions and reason about the outcome of different actions.</p>
<p>It is possible to spawn objects and robots into the BulletWorld, these objects can come from URDF, OBJ or STL files.</p>
<p>A BulletWorld can be created by simply creating an object of the BulletWorld class.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pycram.bullet_world</span> <span class="kn">import</span> <span class="n">BulletWorld</span><span class="p">,</span> <span class="n">Object</span>
<span class="kn">from</span> <span class="nn">pycram.enums</span> <span class="kn">import</span> <span class="n">ObjectType</span>
<span class="kn">from</span> <span class="nn">pycram.pose</span> <span class="kn">import</span> <span class="n">Pose</span>

<span class="n">world</span> <span class="o">=</span> <span class="n">BulletWorld</span><span class="p">()</span>
</pre></div>
</div>
<p>The BulletWorld allows to render images from arbitrary positions. In the following example we render images with the camera at the position [0.3, 0, 1] and pointing towards [1, 0, 1], so we are looking upwards along the x-axis.</p>
<p>The renderer returns 3 different kinds of images which are also shown on the left side of the BulletWorld window. (If these winodws are missing, click the BulletWorld window to focus it, and press “g”) These images are:</p>
<ul class="simple">
<li><p>An RGB image which shows everything like it is rendered in the BulletWorld window, just from another perspective.</p></li>
<li><p>A depth image which consists of distance values from the camera towards the objects in the field of view.</p></li>
<li><p>A segmentation mask image which segments the image into the different objects displayed. The segmentation is done by assigning every pixel the unique id of the object that is displayed there.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">world</span><span class="o">.</span><span class="n">get_images_for_target</span><span class="p">(</span><span class="n">Pose</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]),</span> <span class="n">Pose</span><span class="p">([</span><span class="mf">0.3</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
<section id="objects">
<h2>Objects<a class="headerlink" href="#objects" title="Permalink to this heading">#</a></h2>
<p>Everything that is located inside the BulletWorld is an Object.
Objects can be created from URDF, OBJ or STL files. Since everything is of type Object a robot might share the same methods as a milk (with some limitations).</p>
<p>Signature:
Object:</p>
<ul class="simple">
<li><p>Name</p></li>
<li><p>Type</p></li>
<li><p>Filename or Filepath</p></li>
</ul>
<p>Optional:</p>
<ul class="simple">
<li><p>Position</p></li>
<li><p>Orientation</p></li>
<li><p>World</p></li>
<li><p>Color</p></li>
<li><p>Ignore Cached Files</p></li>
</ul>
<p>If there is only a filename and no path, PyCRAM will check in the resource directory if there is a matching file.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">milk</span> <span class="o">=</span> <span class="n">Object</span><span class="p">(</span><span class="s2">&quot;Milk&quot;</span><span class="p">,</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">MILK</span><span class="p">,</span> <span class="s2">&quot;milk.stl&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Objects provide methods to change the position and rotation, change the color, attach other objects, set the state of joints if the objects has any or get the position and orientation of a link.</p>
<p>These methods are the same for every Object, however since some Objects may not have joints or more than one link methods related to these will not work.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">milk</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">Pose</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]))</span>
</pre></div>
</div>
<p>To remove an Object from the BulletWorld just call the ‘remove’ method on the Object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">milk</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
</pre></div>
</div>
<p>Since everything inside the BulletWorld is an Object, even a complex environment Object like the kitchen can be spawned in the same way as the milk.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">kitchen</span> <span class="o">=</span> <span class="n">Object</span><span class="p">(</span><span class="s2">&quot;kitchen&quot;</span><span class="p">,</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">ENVIRONMENT</span><span class="p">,</span> <span class="s2">&quot;kitchen.urdf&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="costmaps">
<h2>Costmaps<a class="headerlink" href="#costmaps" title="Permalink to this heading">#</a></h2>
<p>Costmaps are a way to get positions with respect to certain criterias.
The currently available costmaps are:</p>
<ul class="simple">
<li><p>Occupancy Costmap</p></li>
<li><p>Visibility Costmap</p></li>
<li><p>Semantic Costmap</p></li>
<li><p>Gaussian Costmap</p></li>
</ul>
<p>It is also possible to merge multiple costmaps to combine different criteria.</p>
<section id="visibility-costmaps">
<h3>Visibility Costmaps<a class="headerlink" href="#visibility-costmaps" title="Permalink to this heading">#</a></h3>
<p>Visibility costmaps determine every position, around a target position, from which the target is visible. Visibility Costmaps are able to work with cameras that are movable in height for example, if the robot has a movable torso.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pycram.costmaps</span> <span class="k">as</span> <span class="nn">cm</span>
<span class="n">v</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">VisibilityCostmap</span><span class="p">(</span><span class="mf">1.27</span><span class="p">,</span> <span class="mf">1.60</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="n">Pose</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span><span class="o">.</span><span class="n">visualize</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">v</span><span class="o">.</span><span class="n">close_visualization</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="occupancy-costmap">
<h3>Occupancy Costmap<a class="headerlink" href="#occupancy-costmap" title="Permalink to this heading">#</a></h3>
<p>Is valid for every position where the robot can be placed without colliding with an object.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">o</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">OccupancyCostmap</span><span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">from_ros</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">300</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mf">0.02</span><span class="p">,</span> <span class="n">origin</span><span class="o">=</span><span class="n">Pose</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">s</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">SemanticCostmap</span><span class="p">(</span><span class="n">kitchen</span><span class="p">,</span> <span class="s2">&quot;kitchen_island_surface&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mf">0.02</span><span class="p">)</span>

<span class="n">g</span> <span class="o">=</span> <span class="n">cm</span><span class="o">.</span><span class="n">GaussianCostmap</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="n">resolution</span><span class="o">=</span><span class="mf">0.02</span><span class="p">)</span>
</pre></div>
</div>
<p>You can visualize the costmap in the BulletWorld to get an impression what information is actually contained in the costmap. With this you could also check if the costmap was created correctly.
Visualization can be done via the ‘visualize’ method of each costmap.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">o</span><span class="o">.</span><span class="n">visualize</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">o</span><span class="o">.</span><span class="n">close_visualization</span><span class="p">()</span>
</pre></div>
</div>
<p>It is also possible to combine two costmap, this will result in a new costmap with the same size which contains the information of both previous costmaps. Combination is done by checking for each position in the two costmaps if they are zero, in this case to same position in the new costmap will also be zero in any other case the new position will be the normalized product of the two combined costmaps.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ov</span> <span class="o">=</span> <span class="n">o</span> <span class="o">+</span> <span class="n">v</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ov</span><span class="o">.</span><span class="n">visualize</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ov</span><span class="o">.</span><span class="n">close_visualization</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="bullet-world-reasoning">
<h2>Bullet World Reasoning<a class="headerlink" href="#bullet-world-reasoning" title="Permalink to this heading">#</a></h2>
<p>Allows for geometric reasoning in the BulletWorld. At the moment the following types of reasoning are supported:</p>
<ul class="simple">
<li><p>Stable</p></li>
<li><p>Contact</p></li>
<li><p>Visible</p></li>
<li><p>Occluding</p></li>
<li><p>Reachable</p></li>
<li><p>Blocking</p></li>
<li><p>Supporting</p></li>
</ul>
<p>To show the geometric reasoning we first spawn a robot as well as the milk Object again.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pycram.bullet_world_reasoning</span> <span class="k">as</span> <span class="nn">btr</span>
<span class="n">milk</span> <span class="o">=</span> <span class="n">Object</span><span class="p">(</span><span class="s2">&quot;Milk&quot;</span><span class="p">,</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">MILK</span><span class="p">,</span> <span class="s2">&quot;milk.stl&quot;</span><span class="p">,</span> <span class="n">pose</span><span class="o">=</span><span class="n">Pose</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>
<span class="n">pr2</span> <span class="o">=</span> <span class="n">Object</span><span class="p">(</span><span class="s2">&quot;pr2&quot;</span><span class="p">,</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">ROBOT</span><span class="p">,</span> <span class="s2">&quot;pr2.urdf&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>We start with testing for visibility</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">milk</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">Pose</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">]))</span>
<span class="n">visible</span> <span class="o">=</span> <span class="n">btr</span><span class="o">.</span><span class="n">visible</span><span class="p">(</span><span class="n">milk</span><span class="p">,</span> <span class="n">pr2</span><span class="o">.</span><span class="n">get_link_pose</span><span class="p">(</span><span class="s2">&quot;wide_stereo_optical_frame&quot;</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Milk visible: </span><span class="si">{</span><span class="n">visible</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">milk</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">Pose</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">]))</span>

<span class="n">plane</span> <span class="o">=</span> <span class="n">BulletWorld</span><span class="o">.</span><span class="n">current_bullet_world</span><span class="o">.</span><span class="n">objects</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">contact</span> <span class="o">=</span> <span class="n">btr</span><span class="o">.</span><span class="n">contact</span><span class="p">(</span><span class="n">milk</span><span class="p">,</span> <span class="n">plane</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Milk is in contact with the floor: </span><span class="si">{</span><span class="n">contact</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">milk</span><span class="o">.</span><span class="n">set_position</span><span class="p">(</span><span class="n">Pose</span><span class="p">([</span><span class="mf">0.6</span><span class="p">,</span> <span class="o">-</span><span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.7</span><span class="p">]))</span>

<span class="n">reachable</span> <span class="o">=</span> <span class="n">btr</span><span class="o">.</span><span class="n">reachable</span><span class="p">(</span><span class="n">milk</span><span class="p">,</span> <span class="n">pr2</span><span class="p">,</span> <span class="s2">&quot;r_gripper_tool_frame&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Milk is reachable for the PR2: </span><span class="si">{</span><span class="n">reachable</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="designators">
<h1>Designators<a class="headerlink" href="#designators" title="Permalink to this heading">#</a></h1>
<p>Designators are symbolic descriptions of Actions, Motions, Objects or Locations. In PyCRAM the different types of designators are represented by a class which takes a description, the description then tells the designator what to do.</p>
<p>For example, let’s look at a Motion Designator to move the robot to a specific location.</p>
<section id="motion-designators">
<h2>Motion Designators<a class="headerlink" href="#motion-designators" title="Permalink to this heading">#</a></h2>
<p>When using a Motion Designator you need to specify which Process Module needs to be used, either the Process Module for the real or the simulated robot. A Process Module is the interface between a real or simulated robot, and PyCRAM designators. By exchanging the Process Module, one can quickly change the robot the plan is executed on, allowing PyCRAM plans to be re-used across multiple robot platforms. This can be done either with a decorator which can be added to a function and then every designator executed within this function, will be executed on the specified robot. The other possibility is a “with” scope which wraps a code piece.</p>
<p>These two ways can also be combined, you could write a function which should be executed on the real robot and the function contains a “with” scope which executes something on the simulated robot for reasoning purposes.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pycram.designators.motion_designator</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pycram.process_module</span> <span class="kn">import</span> <span class="n">simulated_robot</span><span class="p">,</span> <span class="n">with_simulated_robot</span>

<span class="n">description</span> <span class="o">=</span> <span class="n">MoveMotion</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">Pose</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span>

<span class="k">with</span> <span class="n">simulated_robot</span><span class="p">:</span>
    <span class="n">description</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>
    

</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pycram.process_module</span> <span class="kn">import</span> <span class="n">with_simulated_robot</span>

<span class="nd">@with_simulated_robot</span>
<span class="k">def</span> <span class="nf">move</span><span class="p">():</span>
    <span class="n">MoveMotion</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">Pose</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]))</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>

<span class="n">move</span><span class="p">()</span>
</pre></div>
</div>
<p>Other implemented Motion Designator descriptions are:</p>
<ul class="simple">
<li><p>Accessing</p></li>
<li><p>Move TCP</p></li>
<li><p>Looking</p></li>
<li><p>Move Gripper</p></li>
<li><p>Detecting</p></li>
<li><p>Move Arm Joint</p></li>
<li><p>World State Detecting</p></li>
</ul>
</section>
<section id="object-designators">
<h2>Object Designators<a class="headerlink" href="#object-designators" title="Permalink to this heading">#</a></h2>
<p>An Object Designator represents objects. These objects could either be from the BulletWorld or the real world. Object Designators are used, for example, by the PickUpAction to know which object should be picked up.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pycram.designators.object_designator</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">milk_desig</span> <span class="o">=</span> <span class="n">BelieveObject</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Milk&quot;</span><span class="p">])</span>
<span class="n">milk_desig</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="location-designator">
<h2>Location Designator<a class="headerlink" href="#location-designator" title="Permalink to this heading">#</a></h2>
<p>Location Designator can create a position in cartisian space from a symbolic desctiption</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pycram.designators.object_designator</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">milk_desig</span> <span class="o">=</span> <span class="n">BelieveObject</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Milk&quot;</span><span class="p">])</span>
<span class="n">milk_desig</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="location-designators">
<h2>Location Designators<a class="headerlink" href="#location-designators" title="Permalink to this heading">#</a></h2>
<p>Location Designators can create a position in cartesian space from a symbolic description.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pycram.designators.location_designator</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pycram.designators.object_designator</span> <span class="kn">import</span> <span class="o">*</span>

<span class="n">robot_desig</span> <span class="o">=</span> <span class="n">BelieveObject</span><span class="p">(</span><span class="n">types</span><span class="o">=</span><span class="p">[</span><span class="n">ObjectType</span><span class="o">.</span><span class="n">ROBOT</span><span class="p">])</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
<span class="n">milk_desig</span> <span class="o">=</span> <span class="n">BelieveObject</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;Milk&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
<span class="n">location_desig</span> <span class="o">=</span> <span class="n">CostmapLocation</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">milk_desig</span><span class="p">,</span> <span class="n">visible_for</span><span class="o">=</span><span class="n">robot_desig</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Resolved: </span><span class="si">{</span><span class="n">location_desig</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">()</span>

<span class="k">for</span> <span class="n">pose</span> <span class="ow">in</span> <span class="n">location_desig</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">pose</span><span class="p">)</span>
                              
</pre></div>
</div>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="action-designator">
<h1>Action Designator<a class="headerlink" href="#action-designator" title="Permalink to this heading">#</a></h1>
<p>Action Designators are used to describe high-level actions. Action Designators are usually composed of other Designators to describe the high-level action in detail.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pycram.designators.action_designator</span> <span class="kn">import</span> <span class="o">*</span>
<span class="kn">from</span> <span class="nn">pycram.enums</span> <span class="kn">import</span> <span class="n">Arms</span>

<span class="k">with</span> <span class="n">simulated_robot</span><span class="p">:</span>
    <span class="n">ParkArmsAction</span><span class="p">([</span><span class="n">Arms</span><span class="o">.</span><span class="n">BOTH</span><span class="p">])</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>

</pre></div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="making-a-simple-plan">
<h1>Making a simple plan<a class="headerlink" href="#making-a-simple-plan" title="Permalink to this heading">#</a></h1>
<p>To get familiar with the PyCRAM Framework we will write a simple pick and place plan. This plan will let the robot grasp a cereal box from the kitchen counter and place it on the kitchen island. This is a simple pick and place plan.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">pycram.designators.object_designator</span> <span class="kn">import</span> <span class="o">*</span>
<span class="n">cereal</span> <span class="o">=</span> <span class="n">Object</span><span class="p">(</span><span class="s2">&quot;cereal&quot;</span><span class="p">,</span> <span class="n">ObjectType</span><span class="o">.</span><span class="n">BREAKFAST_CEREAL</span><span class="p">,</span> <span class="s2">&quot;breakfast_cereal.stl&quot;</span><span class="p">,</span> <span class="n">pose</span><span class="o">=</span><span class="n">Pose</span><span class="p">([</span><span class="mf">1.4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mf">0.95</span><span class="p">]))</span>

</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cereal_desig</span> <span class="o">=</span> <span class="n">ObjectDesignatorDescription</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;cereal&quot;</span><span class="p">])</span>
<span class="n">kitchen_desig</span> <span class="o">=</span> <span class="n">ObjectDesignatorDescription</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;kitchen&quot;</span><span class="p">])</span>
<span class="n">robot_desig</span> <span class="o">=</span> <span class="n">ObjectDesignatorDescription</span><span class="p">(</span><span class="n">names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;pr2&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
<span class="k">with</span> <span class="n">simulated_robot</span><span class="p">:</span>
    <span class="n">ParkArmsAction</span><span class="p">([</span><span class="n">Arms</span><span class="o">.</span><span class="n">BOTH</span><span class="p">])</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>

    <span class="n">MoveTorsoAction</span><span class="p">([</span><span class="mf">0.3</span><span class="p">])</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>

    <span class="n">pickup_pose</span> <span class="o">=</span> <span class="n">CostmapLocation</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">cereal_desig</span><span class="o">.</span><span class="n">resolve</span><span class="p">(),</span> <span class="n">reachable_for</span><span class="o">=</span><span class="n">robot_desig</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>
    <span class="n">pickup_arm</span> <span class="o">=</span> <span class="n">pickup_pose</span><span class="o">.</span><span class="n">reachable_arms</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="n">NavigateAction</span><span class="p">(</span><span class="n">target_locations</span><span class="o">=</span><span class="p">[</span><span class="n">pickup_pose</span><span class="o">.</span><span class="n">pose</span><span class="p">])</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>

    <span class="n">PickUpAction</span><span class="p">(</span><span class="n">object_designator_description</span><span class="o">=</span><span class="n">cereal_desig</span><span class="p">,</span> <span class="n">arms</span><span class="o">=</span><span class="p">[</span><span class="n">pickup_arm</span><span class="p">],</span> <span class="n">grasps</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;front&quot;</span><span class="p">])</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>

    <span class="n">ParkArmsAction</span><span class="p">([</span><span class="n">Arms</span><span class="o">.</span><span class="n">BOTH</span><span class="p">])</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>

    <span class="n">place_island</span> <span class="o">=</span> <span class="n">SemanticCostmapLocation</span><span class="p">(</span><span class="s2">&quot;kitchen_island_surface&quot;</span><span class="p">,</span> <span class="n">kitchen_desig</span><span class="o">.</span><span class="n">resolve</span><span class="p">(),</span> <span class="n">cereal_desig</span><span class="o">.</span><span class="n">resolve</span><span class="p">())</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>

    <span class="n">place_stand</span> <span class="o">=</span> <span class="n">CostmapLocation</span><span class="p">(</span><span class="n">place_island</span><span class="o">.</span><span class="n">pose</span><span class="p">,</span> <span class="n">reachable_for</span><span class="o">=</span><span class="n">robot_desig</span><span class="p">,</span> <span class="n">reachable_arm</span><span class="o">=</span><span class="n">pickup_arm</span><span class="p">)</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span>

    <span class="n">NavigateAction</span><span class="p">(</span><span class="n">target_locations</span><span class="o">=</span><span class="p">[</span><span class="n">place_stand</span><span class="o">.</span><span class="n">pose</span><span class="p">])</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>

    <span class="n">PlaceAction</span><span class="p">(</span><span class="n">cereal_desig</span><span class="p">,</span> <span class="n">target_locations</span><span class="o">=</span><span class="p">[</span><span class="n">place_island</span><span class="o">.</span><span class="n">pose</span><span class="p">],</span> <span class="n">arms</span><span class="o">=</span><span class="p">[</span><span class="n">pickup_arm</span><span class="p">])</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>

    <span class="n">ParkArmsAction</span><span class="p">([</span><span class="n">Arms</span><span class="o">.</span><span class="n">BOTH</span><span class="p">])</span><span class="o">.</span><span class="n">resolve</span><span class="p">()</span><span class="o">.</span><span class="n">perform</span><span class="p">()</span>
    
    
    
</pre></div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="task-trees">
<h1>Task Trees<a class="headerlink" href="#task-trees" title="Permalink to this heading">#</a></h1>
<p>Task trees are a hierarchical representation of all Actions involved in a plan. The Task tree can later be used to inspect and restructure the execution order of Actions in the plan.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pycram.task</span>
<span class="kn">import</span> <span class="nn">anytree</span>
<span class="n">tt</span> <span class="o">=</span> <span class="n">pycram</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">task_tree</span>
<span class="nb">print</span><span class="p">(</span><span class="n">anytree</span><span class="o">.</span><span class="n">RenderTree</span><span class="p">(</span><span class="n">tt</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">anytree.dotexport</span> <span class="kn">import</span> <span class="n">RenderTreeGraph</span><span class="p">,</span> <span class="n">DotExporter</span>
<span class="n">RenderTreeGraph</span><span class="p">(</span><span class="n">tt</span><span class="p">)</span><span class="o">.</span><span class="n">to_picture</span><span class="p">(</span><span class="s2">&quot;tree.png&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="orm">
<h1>ORM<a class="headerlink" href="#orm" title="Permalink to this heading">#</a></h1>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sqlalchemy.orm</span>
<span class="kn">import</span> <span class="nn">pycram.orm.base</span>
<span class="kn">import</span> <span class="nn">pycram.orm.action_designator</span>

<span class="c1"># set description of what we are doing</span>
<span class="n">pycram</span><span class="o">.</span><span class="n">orm</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">ProcessMetaData</span><span class="p">()</span><span class="o">.</span><span class="n">description</span> <span class="o">=</span> <span class="s2">&quot;Tutorial for getting familiar with the ORM.&quot;</span>

<span class="n">engine</span> <span class="o">=</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">create_engine</span><span class="p">(</span><span class="s2">&quot;sqlite+pysqlite:///:memory:&quot;</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">session</span> <span class="o">=</span> <span class="n">sqlalchemy</span><span class="o">.</span><span class="n">orm</span><span class="o">.</span><span class="n">Session</span><span class="p">(</span><span class="n">bind</span><span class="o">=</span><span class="n">engine</span><span class="p">)</span>
<span class="n">pycram</span><span class="o">.</span><span class="n">orm</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">Base</span><span class="o">.</span><span class="n">metadata</span><span class="o">.</span><span class="n">create_all</span><span class="p">(</span><span class="n">engine</span><span class="p">)</span>
<span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>


<span class="n">tt</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="n">session</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sqlalchemy</span> <span class="kn">import</span> <span class="n">select</span>

<span class="n">navigations</span> <span class="o">=</span> <span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">pycram</span><span class="o">.</span><span class="n">orm</span><span class="o">.</span><span class="n">action_designator</span><span class="o">.</span><span class="n">NavigateAction</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="o">*</span><span class="n">navigations</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">navigations</span> <span class="o">=</span> <span class="p">(</span><span class="n">session</span><span class="o">.</span><span class="n">scalars</span><span class="p">(</span><span class="n">select</span><span class="p">(</span><span class="n">pycram</span><span class="o">.</span><span class="n">orm</span><span class="o">.</span><span class="n">action_designator</span><span class="o">.</span><span class="n">NavigateAction</span><span class="p">,</span> <span class="n">pycram</span><span class="o">.</span><span class="n">orm</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">Position</span><span class="p">,</span> <span class="n">pycram</span><span class="o">.</span><span class="n">orm</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">Quaternion</span><span class="p">)</span><span class="o">.</span>
                               <span class="n">join</span><span class="p">(</span><span class="n">pycram</span><span class="o">.</span><span class="n">orm</span><span class="o">.</span><span class="n">action_designator</span><span class="o">.</span><span class="n">NavigateAction</span><span class="o">.</span><span class="n">pose</span><span class="p">)</span><span class="o">.</span>
                               <span class="n">join</span><span class="p">(</span><span class="n">pycram</span><span class="o">.</span><span class="n">orm</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">Pose</span><span class="o">.</span><span class="n">position</span><span class="p">)</span><span class="o">.</span>
                               <span class="n">join</span><span class="p">(</span><span class="n">pycram</span><span class="o">.</span><span class="n">orm</span><span class="o">.</span><span class="n">base</span><span class="o">.</span><span class="n">Pose</span><span class="o">.</span><span class="n">orientation</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">())</span>
<span class="nb">print</span><span class="p">(</span><span class="o">*</span><span class="n">navigations</span><span class="p">,</span> <span class="n">sep</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>The world can also be closed with the ‘exit’ method</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">world</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</pre></div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./notebooks"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">PyCRAM Presentation</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#bullet-world">Bullet World</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#objects">Objects</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#costmaps">Costmaps</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#visibility-costmaps">Visibility Costmaps</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#occupancy-costmap">Occupancy Costmap</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bullet-world-reasoning">Bullet World Reasoning</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#designators">Designators</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#motion-designators">Motion Designators</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#object-designators">Object Designators</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#location-designator">Location Designator</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#location-designators">Location Designators</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#action-designator">Action Designator</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#making-a-simple-plan">Making a simple plan</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#task-trees">Task Trees</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#orm">ORM</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jonas Dech
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>